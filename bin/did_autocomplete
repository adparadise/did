#!/usr/bin/env ruby

$: << File.dirname(__FILE__) + "/../lib"
require 'env'

command, partial, prior = ARGV[0..2]

USE_ACTIVE_RECORD = false

if (USE_ACTIVE_RECORD) 
  Env.setup_active_record(false)
  require 'tag'

  tags = Tag.find(:all, :conditions => ["label like ?", partial + "%"])
  tags.each do |tag|
    puts tag.label
  end
else
  Env.setup_raw(false)
  exit if Env.db.nil?
  Env.db.execute("select label from tags where label like ?", partial + "%") do |row|
    puts row[0]
  end
end
